# NY Sales Tax Calculator üóΩ

RESTful API —Å–µ—Ä–≤—ñ—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø–æ–¥–∞—Ç–∫—É –∑ –ø—Ä–æ–¥–∞–∂—É –¥–ª—è —à—Ç–∞—Ç—É –ù—å—é-–ô–æ—Ä–∫ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≥–µ–æ–≥—Ä–∞—Ñ—ñ—á–Ω–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.

---

## üí° –ì–æ–ª–æ–≤–Ω–∞ —ñ–¥–µ—è —Ç–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

–í –æ—Å–Ω–æ–≤—ñ –ø—Ä–æ—î–∫—Ç—É –ª–µ–∂–∏—Ç—å –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ –ø—Ä–æ—Å—Ç–æ—Ä–æ–≤–æ–≥–æ –ø–æ—à—É–∫—É. –û—Å–∫—ñ–ª—å–∫–∏ –ø–æ–¥–∞—Ç–∫–æ–≤—ñ —Å—Ç–∞–≤–∫–∏ –∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —é—Ä–∏—Å–¥–∏–∫—Ü—ñ–π (–ø–æ–ª—ñ–≥–æ–Ω—ñ–≤ –Ω–∞ –∫–∞—Ä—Ç—ñ), –∑–≤–∏—á–∞–π–Ω—ñ —Ä–µ–ª—è—Ü—ñ–π–Ω—ñ –∑–∞–ø–∏—Ç–∏ —Ç—É—Ç –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ.

### üîë –ö–ª—é—á–æ–≤—ñ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è

1. **PostGIS —è–∫ –≥–µ–æ-—Ä—É—à—ñ–π**  
   –ó–∞–º—ñ—Å—Ç—å —Å–∫–ª–∞–¥–Ω–∏—Ö –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å —É –∫–æ–¥—ñ C#, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è PostGIS –¥–ª—è PostgreSQL.  
   –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (–¥–æ–≤–≥–æ—Ç–∞/—à–∏—Ä–æ—Ç–∞) –∫–æ–Ω–≤–µ—Ä—Ç—É—é—Ç—å—Å—è —É —Ç–∏–ø `geometry`, —â–æ –¥–æ–∑–≤–æ–ª—è—î –±–∞–∑—ñ –¥–∞–Ω–∏—Ö –º–∏—Ç—Ç—î–≤–æ –≤–∏–∑–Ω–∞—á–∞—Ç–∏, –¥–æ —è–∫–æ—ó –ø–æ–¥–∞—Ç–∫–æ–≤–æ—ó –∑–æ–Ω–∏ –Ω–∞–ª–µ–∂–∏—Ç—å —Ç–æ—á–∫–∞.

2. **Clean Architecture**  
   –ü—Ä–æ—î–∫—Ç —Ä–æ–∑–¥—ñ–ª–µ–Ω–∏–π –Ω–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ —à–∞—Ä–∏:
   - `Domain`
   - `Application`
   - `Infrastructure`
   - `API`

   –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø–æ–¥–∞—Ç–∫—ñ–≤ –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–∑–æ–ª—å–æ–≤–∞–Ω–∞ –≤—ñ–¥ –¥–µ—Ç–∞–ª–µ–π —Ä–æ–±–æ—Ç–∏ –∑ –ë–î –∞–±–æ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ —Ñ–∞–π–ª—ñ–≤ (CSV).

3. **Full Stack + –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è**  
   –£ Docker —É–ø–∞–∫–æ–≤–∞–Ω–æ:
   - Backend (ASP.NET Core API)
   - Frontend (React + Vite)
   - PostgreSQL + PostGIS

   –¶–µ –ø–æ–≤–Ω—ñ—Å—Ç—é —É—Å—É–≤–∞—î –ø—Ä–æ–±–ª–µ–º—É "–Ω–∞ –º–æ—î–º—É –∫–æ–º–ø'—é—Ç–µ—Ä—ñ –ø—Ä–∞—Ü—é—î".

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫

### üîπ Backend
- C# 14
- .NET 10
- ASP.NET Core Web API
- Entity Framework Core 10
- CsvHelper
- Scalar API Reference

### üîπ Frontend
- React 18
- TypeScript
- Material UI (MUI)
- Axios
- Vite

### üîπ Database
- PostgreSQL 15
- PostGIS 3.4

### üîπ DevOps
- Docker
- Docker Compose

---

# üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ—î–∫—Ç—É (Full Stack)

–î–ª—è –∑–∞–ø—É—Å–∫—É —Å–∏—Å—Ç–µ–º–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω –ª–∏—à–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π **Docker Desktop**.

## 1Ô∏è‚É£ –ó–∞–ø—É—Å–∫ —É—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤

–£ –∫–æ—Ä–µ–Ω–µ–≤—ñ–π –ø–∞–ø—Ü—ñ –ø—Ä–æ—î–∫—Ç—É (–¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è `docker-compose.yml`) –≤–∏–∫–æ–Ω–∞–π—Ç–µ:

```bash
docker-compose up -d --build
```

Docker –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:

- –ü—ñ–¥–Ω—ñ–º–µ PostgreSQL + PostGIS
- –ó–±–µ—Ä–µ —Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å Backend
- –ó–±–µ—Ä–µ —Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å Frontend

‚è≥ –ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –∑–∞—á–µ–∫–∞–π—Ç–µ 15‚Äì20 —Å–µ–∫—É–Ω–¥ –¥–ª—è –ø–æ–≤–Ω–æ—ó —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.

---

## 2Ô∏è‚É£ –î–æ—Å—Ç—É–ø –¥–æ —Å–µ—Ä–≤—ñ—Å—ñ–≤

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç—É —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –∑–∞ –∞–¥—Ä–µ—Å–∞–º–∏:

| –°–µ—Ä–≤—ñ—Å | URL |
|--------|------|
| üåê Frontend UI | http://localhost:5173 |
| üì° API (Backend) | http://localhost:8080/api/orders |
| üìò API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (Scalar) | http://localhost:8080/scalar/v1 |
| üóÑ PostgreSQL | localhost:5433 |

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –ë–î:
- User: `postgres`
- Password: `12345`
- Database: `survey_db`

---

# üñ• Frontend ‚Äî –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å

–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –Ω–∞ React + MUI —Ç–∞ –¥–æ–∑–≤–æ–ª—è—î –∫–µ—Ä—É–≤–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º–∏ —á–µ—Ä–µ–∑ –∑—Ä—É—á–Ω–∏–π UI.

## –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### üìÇ 1. –Ü–º–ø–æ—Ä—Ç CSV —á–µ—Ä–µ–∑ Drag-and-Drop
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è `.csv` —Ñ–∞–π–ª—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–¥–∞—Ç–∫—É
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –ë–î

### üìù 2. –†—É—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
–§–æ—Ä–º–∞ –¥–æ–∑–≤–æ–ª—è—î:
- –í–≤–µ—Å—Ç–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏
- –í–∫–∞–∑–∞—Ç–∏ subtotal
- –û—Ç—Ä–∏–º–∞—Ç–∏ –º–∏—Ç—Ç—î–≤–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–¥–∞—Ç–∫—É

### üîç 3. –ö–ª—ñ—î–Ω—Ç—Å—å–∫–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è
- –ü–æ—à—É–∫ –∑–∞ ID
- –ü–æ—à—É–∫ –∑–∞ —é—Ä–∏—Å–¥–∏–∫—Ü—ñ—î—é
- –ú–∏—Ç—Ç—î–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ

### üìÑ 4. –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è
- 5 / 10 / 25 / 50 –∑–∞–ø–∏—Å—ñ–≤ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
- –ü–ª–∞–≤–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –ø–æ –≤–µ–ª–∏–∫–∏—Ö –Ω–∞–±–æ—Ä–∞—Ö –¥–∞–Ω–∏—Ö

---

# üì° API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

---

## 1Ô∏è‚É£ –Ü–º–ø–æ—Ä—Ç –∑–∞–º–æ–≤–ª–µ–Ω—å —ñ–∑ CSV

**URL:**
```
POST /api/orders/import
```

**Body:**
```
multipart/form-data
Key: file
```

---

## 2Ô∏è‚É£ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–¥–∏–Ω–∏—á–Ω–æ–≥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (JSON)

**URL:**
```
POST /api/orders
```

**Headers:**
```
Content-Type: application/json
```

**Body:**
```json
{
  "id": "1001",
  "longitude": -73.985428,
  "latitude": 40.748817,
  "timestamp": "2026-02-28T10:00:00Z",
  "subtotal": 100.00
}
```

---

## 3Ô∏è‚É£ –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –∑–∞–º–æ–≤–ª–µ–Ω—å (–∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é)

**URL:**
```
GET /api/orders?page=1&pageSize=10
```

**Response:**
```json
{
  "totalCount": 11222,
  "page": 1,
  "pageSize": 10,
  "items": [
    {
      "id": "1001",
      "latitude": 40.748817,
      "longitude": -73.985428,
      "subtotal": 100.00,
      "composite_tax_rate": 0.08875,
      "tax_amount": 8.88,
      "total_amount": 108.88,
      "breakdown": {
        "state_rate": 0.04,
        "county_rate": 0.04875,
        "city_rate": 0.0,
        "special_rates": 0.0
      },
      "jurisdictions": [
        "New York State",
        "New York City"
      ]
    }
  ]
}
```

---

# üßπ –ü–æ–≤–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏–¥–∞–ª–∏—Ç–∏ –¥–∞–Ω—ñ —Ç–∞ –ø–æ—á–∞—Ç–∏ –∑ —á–∏—Å—Ç–æ—ó –ë–î:

```bash
docker-compose down -v
docker-compose up -d --build
```

---

# üì¶ –©–æ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î —Ü–µ–π –ø—Ä–æ—î–∫—Ç

- –†–æ–±–æ—Ç—É –∑ –≥–µ–æ–ø—Ä–æ—Å—Ç–æ—Ä–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏ —á–µ—Ä–µ–∑ PostGIS
- –ü–æ–±—É–¥–æ–≤—É Clean Architecture
- –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—é Full Stack –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—é –≤—Å—ñ—î—ó —Å–∏—Å—Ç–µ–º–∏
- Production-ready —Å—Ç—Ä—É–∫—Ç—É—Ä—É REST API

---

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—Ä–æ—î–∫—Ç —è–≤–ª—è—î —Å–æ–±–æ—é –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–∑–æ–ª—å–æ–≤–∞–Ω—É Full Stack —Å–∏—Å—Ç–µ–º—É, —è–∫—É –º–æ–∂–Ω–∞ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –æ–¥–Ω—ñ—î—é –∫–æ–º–∞–Ω–¥–æ—é —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø–æ–¥–∞—Ç–∫—É –∑ –ø—Ä–æ–¥–∞–∂—É –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –≥–µ–æ–ª–æ–∫–∞—Ü—ñ—ó –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.