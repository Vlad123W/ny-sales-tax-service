# NY Sales Tax Calculator üóΩ

RESTful API —Å–µ—Ä–≤—ñ—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø–æ–¥–∞—Ç–∫—É –∑ –ø—Ä–æ–¥–∞–∂—É (Sales Tax) –¥–ª—è —à—Ç–∞—Ç—É –ù—å—é-–ô–æ—Ä–∫ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≥–µ–æ–≥—Ä–∞—Ñ—ñ—á–Ω–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.

## üí° –ì–æ–ª–æ–≤–Ω–∞ —ñ–¥–µ—è —Ç–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

–í –æ—Å–Ω–æ–≤—ñ –ø—Ä–æ—î–∫—Ç—É –ª–µ–∂–∏—Ç—å –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ –ø—Ä–æ—Å—Ç–æ—Ä–æ–≤–æ–≥–æ –ø–æ—à—É–∫—É (Spatial Queries). –û—Å–∫—ñ–ª—å–∫–∏ –ø–æ–¥–∞—Ç–∫–æ–≤—ñ —Å—Ç–∞–≤–∫–∏ –∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —é—Ä–∏—Å–¥–∏–∫—Ü—ñ–π (–ø–æ–ª—ñ–≥–æ–Ω—ñ–≤ –Ω–∞ –∫–∞—Ä—Ç—ñ), –∑–≤–∏—á–∞–π–Ω—ñ —Ä–µ–ª—è—Ü—ñ–π–Ω—ñ –∑–∞–ø–∏—Ç–∏ —Ç—É—Ç –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ. 

**–ö–ª—é—á–æ–≤—ñ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è:**
1. **PostGIS —è–∫ –≥–µ–æ-—Ä—É—à—ñ–π:** –ó–∞–º—ñ—Å—Ç—å —Å–∫–ª–∞–¥–Ω–∏—Ö –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å —É –∫–æ–¥—ñ C#, –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è PostGIS –¥–ª—è PostgreSQL. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (–¥–æ–≤–≥–æ—Ç–∞/—à–∏—Ä–æ—Ç–∞) –∫–æ–Ω–≤–µ—Ä—Ç—É—é—Ç—å—Å—è —É —Ç–∏–ø `geometry`, —â–æ –¥–æ–∑–≤–æ–ª—è—î –±–∞–∑—ñ –¥–∞–Ω–∏—Ö –º–∏—Ç—Ç—î–≤–æ –≤–∏–∑–Ω–∞—á–∞—Ç–∏, –¥–æ —è–∫–æ—ó –ø–æ–¥–∞—Ç–∫–æ–≤–æ—ó –∑–æ–Ω–∏ –Ω–∞–ª–µ–∂–∏—Ç—å —Ç–æ—á–∫–∞.
2. **Clean Architecture (–ß–∏—Å—Ç–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞):** –ü—Ä–æ—î–∫—Ç —Ä–æ–∑–¥—ñ–ª–µ–Ω–∏–π –Ω–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ —à–∞—Ä–∏ (Domain, Application, Infrastructure, API). –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –ø–æ–¥–∞—Ç–∫—ñ–≤ –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–∑–æ–ª—å–æ–≤–∞–Ω–∞ –≤—ñ–¥ –¥–µ—Ç–∞–ª–µ–π —Ä–æ–±–æ—Ç–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö –∞–±–æ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ —Ñ–∞–π–ª—ñ–≤ (CSV).
3. **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è:** –ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫ —Ç–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö (–∑ —É–∂–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–º PostGIS) –ø–æ–≤–Ω—ñ—Å—Ç—é —É–ø–∞–∫–æ–≤–∞–Ω—ñ –≤ Docker. –¶–µ –≤–∏—Ä—ñ—à—É—î –ø—Ä–æ–±–ª–µ–º—É "–Ω–∞ –º–æ—î–º—É –∫–æ–º–ø'—é—Ç–µ—Ä—ñ –ø—Ä–∞—Ü—é—î" —Ç–∞ –¥–æ–∑–≤–æ–ª—è—î —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ —Å–∏—Å—Ç–µ–º—É –±–µ–∑ –∑–∞–π–≤–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫
* **–ë–µ–∫–µ–Ω–¥:** C# 14, .NET 10, ASP.NET Core Web API
* **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:** PostgreSQL 15 + PostGIS 3.4
* **ORM:** Entity Framework Core 10
* **–ü–∞—Ä—Å–∏–Ω–≥:** CsvHelper
* **–†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è:** Docker, Docker Compose

---

## üöÄ –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç –ª–æ–∫–∞–ª—å–Ω–æ

–î–ª—è –∑–∞–ø—É—Å–∫—É —Å–∏—Å—Ç–µ–º–∏ –≤–∞–º –∑–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –ª–∏—à–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π **Docker** —Ç–∞ **Docker Desktop** (–∞–±–æ Docker Engine). 

### 1. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose (–£ –¥–≤–∞ –∫—Ä–æ–∫–∏)
–ß–µ—Ä–µ–∑ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≥–µ–æ-—Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è PostGIS, –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –º–∞—î –≤—ñ–¥–±—É–≤–∞—Ç–∏—Å—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ç–µ—Ä–º—ñ–Ω–∞–ª —É –∫–æ—Ä–µ–Ω–µ–≤—ñ–π –ø–∞–ø—Ü—ñ –ø—Ä–æ—î–∫—Ç—É:

**–ö—Ä–æ–∫ 1: –ó–∞–ø—É—Å–∫ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**
–ü—ñ–¥–Ω—ñ–º—ñ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —ñ–∑ –ë–î –∫–æ–º–∞–Ω–¥–æ—é:
```bash
docker-compose up db -d
```
‚ö†Ô∏è **–í–∞–∂–ª–∏–≤–æ:** –ó–∞—á–µ–∫–∞–π—Ç–µ 10-15 —Å–µ–∫—É–Ω–¥, —â–æ–± PostgreSQL –ø–æ–≤–Ω—ñ—Å—Ç—é —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞–≤—Å—è —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏–≤ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è PostGIS.

**–ö—Ä–æ–∫ 2: –ó–∞–ø—É—Å–∫ API**
–¢–µ–ø–µ—Ä –∑–±–µ—Ä—ñ—Ç—å —Ç–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –±–µ–∫–µ–Ω–¥:
```bash
docker-compose up api --build -d
```

### 2. –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π
–ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –Ω–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ–π** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ API. –°–∏—Å—Ç–µ–º–∞ —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–∏—Ö `survey_db`, —É–≤—ñ–º–∫–Ω–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ç–∞ —Å—Ç–≤–æ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—é `Orders`.

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞—Ü–µ–∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ
–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É –ø–µ—Ä–µ–π–¥—ñ—Ç—å —É –±—Ä–∞—É–∑–µ—Ä—ñ –∑–∞ –∞–¥—Ä–µ—Å–æ—é:
üëâ **http://localhost:8080**

–¢—É—Ç –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é Swagger, —á–µ—Ä–µ–∑ —è–∫—É –º–æ–∂–Ω–∞ –æ–¥—Ä–∞–∑—É –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤—Å—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏.

---

## üì° API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

API –¥–æ—Å—Ç—É–ø–Ω–µ –∑–∞ –ø–æ—Ä—Ç–æ–º `8080`.

### 1. –Ü–º–ø–æ—Ä—Ç –∑–∞–º–æ–≤–ª–µ–Ω—å —ñ–∑ CSV —Ñ–∞–π–ª—É
–ó–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ñ–∞–π–ª, —Ä–æ–∑–ø—ñ–∑–Ω–∞—î –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏, —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î –ø–æ–¥–∞—Ç–∫–∏ —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î –≤ –ë–î.
* **URL:** `POST /api/orders/import`
* **Body:** `multipart/form-data`
  * –ö–ª—é—á: `file` (—Ç–∏–ø File, –ø—Ä–∏–∫—Ä—ñ–ø—ñ—Ç—å –≤–∞—à `.csv` —Ñ–∞–π–ª)

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–¥–∏–Ω–∏—á–Ω–æ–≥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è (JSON)
–ó—Ä—É—á–Ω–æ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑ —Ñ–∞–π–ª—ñ–≤.
* **URL:** `POST /api/orders`
* **Headers:** `Content-Type: application/json`
* **Body:**
```json
{
  "id": "1001",
  "longitude": -73.985428,
  "latitude": 40.748817,
  "timestamp": "2025-11-04T10:00:00Z",
  "subtotal": 100.00
}
```

### 3. –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –∑–∞–º–æ–≤–ª–µ–Ω—å (–∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é)
–ü–æ–≤–µ—Ä—Ç–∞—î –∑–±–µ—Ä–µ–∂–µ–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —ñ–∑ —Ä–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω–∏–º–∏ —Å—É–º–∞–º–∏ –ø–æ–¥–∞—Ç–∫—ñ–≤.
* **URL:** `GET /api/orders?page=1&pageSize=10`
* **–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "totalCount": 11222,
  "items": [
    {
      "id": "1001",
      "subtotal": 100.00,
      "taxAmount": 8.88,
      "totalAmount": 108.88,
      "jurisdictions": ["New York State", "New York City"]
    }
  ]
}
```

---

## üßπ –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ Docker

–Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–≤–Ω—ñ—Å—Ç—é –æ—á–∏—Å—Ç–∏—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö (–≤–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ —Ç–∞–±–ª–∏—Ü—ñ —Ç–∞ –¥–∞–Ω—ñ) —ñ –ø–æ—á–∞—Ç–∏ –∑ —á–∏—Å—Ç–æ–≥–æ –∞—Ä–∫—É—à–∞:
```bash
docker-compose down -v
docker-compose up db -d
# –ó–∞—á–µ–∫–∞—Ç–∏ 10-15 —Å–µ–∫—É–Ω–¥...
docker-compose up api --build -d
```
